(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{185:function(e,t,a){},256:function(e,t,a){e.exports=a(552)},261:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){},382:function(e,t,a){},384:function(e,t,a){},547:function(e,t,a){},549:function(e,t,a){},550:function(e,t,a){},551:function(e,t,a){},552:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(5),s=a.n(o),i=(a(261),a(103)),r=a.n(i),c=a(165),u=a.n(c),m=a(15),h=a.n(m),p=a(16),d=a.n(p),g={login:{path:"/users/login"},register:{path:"/users/register"},getArticle:{path:"/article/getArticle"},getTagList:{path:"/users/getTag"},publish:{path:"/users/publish"},getArticleById:{path:"/article/getArticleById"},saveArticleTag:{path:"/article/saveArticleTag"},collectActicle:{path:"/article/collectArticle"},getQiniuToken:{path:"/qiniuUpload"},editUserAvater:{path:"/users/editUserAvater"},follow:{path:"/users/follow"},getUserBasicInfo:{path:"/users/getUserBasicInfo"}},f=a(565);a(263).polyfill();var v=a(264),E=new(function(){function e(){h()(this,e);var t=window.location.href;t=t.toLocaleLowerCase(),console.log(t),t.match("xuweijin.com")?this.host="https://www.xuweijin.com/blogApi":this.host="http://localhost:3003"}return d()(e,[{key:"get",value:function(){var e=u()(r.a.mark(function e(t,a){var n,l,o,s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g[t].path,this.lists={method:"GET",cache:"no-cache",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}},console.log(a.token),a.token&&(this.lists.headers.Authorization="Bearer "+a.token),n=[],this.body="",a instanceof Object){for(o in l=a.data||a)s=o+"="+l[o],n.push(s);this.body="?"+n.join("&"),this.lists.headers=a.headers||this.lists.headers,this.lists.cache=a.cache||this.lists.cache,this.lists.mode=a.mode||this.lists.mode}return e.next=9,v(this.host+t+this.body,this.lists);case 9:if(i=e.sent,console.log(i),"401"!=i.status){e.next=15;break}f.a.error("token\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff5e"),e.next=18;break;case 15:return e.next=17,i.json();case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=u()(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g[t].path,this.lists={method:"POST",cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json"}},a.token&&(this.lists.headers.Authorization="Bearer "+a.token),a instanceof Object&&(this.lists.headers=a.headers||this.lists.headers,this.lists.cache=a.cache||this.lists.cache,this.lists.mode=a.mode||this.lists.mode,this.lists.body=a.body||a,this.lists.body=JSON.stringify(this.lists.body)),e.next=6,v(this.host+t,this.lists);case 6:if("401"!=(n=e.sent).status){e.next=11;break}f.a.error("token\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff5e"),e.next=14;break;case 11:return e.next=13,n.json();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),b=a(167),y={uploadFile:function(e,t){return new Promise(function(a,n){var l=(new Date).getTime()+e.name;console.log(e);var o={useCdnDomain:!0,region:b.region.z0};console.log(t);var s=b.upload(e,l,t,{fname:"",params:{},mimeType:null},o);console.log(s),s.subscribe({complete:function(e){console.log(e),a(e.key)},next:function(e){return console.log(e),e.data},error:function(e){return e}})})},formatDate:function(e,t){var a,n,l,o,s,i,r=new Date(parseInt(e));return a=r.getFullYear(),n=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,l=this.extra(r.getDate()),o=this.extra(r.getHours()),s=this.extra(r.getMinutes()),i=this.extra(r.getSeconds()),"Y"===t?a:"M"===t?n:"D"===t?l:"h"===t?o:"m"===t?s:"s"===t?i:"ALL"===t?a+"-"+n+"-"+l+"  "+o+":"+s+":"+i:"YMD"===t?a+"-"+n+"-"+l:a+"\u5e74"+n+"\u6708"+l+"\u65e5"},extra:function(e){return parseInt(e)<10?"0"+parseInt(e):e},goodTime:function(e){var t=(new Date).getTime()-new Date(1e3*e).getTime(),a=t/31104e6,n=t/2592e6,l=t/6048e5,o=t/864e5,s=t/36e5,i=t/6e4;return a>=1?~~a+"\u5e74\u524d":n>=1?~~n+"\u4e2a\u6708\u524d":l>=1?~~l+"\u5468\u524d":o>=1?~~o+"\u5929\u524d":s>=1?~~s+"\u4e2a\u5c0f\u65f6\u524d":i>=1?~~i+"\u5206\u949f\u524d":"\u521a\u521a"}},k=a(17),w=a.n(k),N=a(18),I=a.n(N),S=a(19),x=a.n(S),C=a(27),_=a(72),D=a(62),L=a.n(D),T=a(10),M=a.n(T),O=a(557),A=a(561),B=a(9),P=a(564),F=a(37),j=(a(185),a(11)),U=a.n(j),J=function(e){function t(e){var a;return h()(this,t),(a=w()(this,I()(t).call(this,e))).handleSubmit=a.handleSubmit.bind(M()(a)),a}return x()(t,e),d()(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){var n=t;e||fetch.post("login",{userName:a.userName,password:a.password}).then(function(e){console.log(n.props),"200"!==e.code?f.a.error(e.msg):(f.a.success("\u767b\u5f55\u6210\u529f\uff5e"),U.a.set("loginInfo",e.data),t.props.parentProps.history.push("/"))})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return l.a.createElement(O.a,{onSubmit:this.handleSubmit,className:"login-form"},l.a.createElement(O.a.Item,null,e("userName",{rules:[{required:!0,message:"Please input your username!"}]})(l.a.createElement(A.a,{prefix:l.a.createElement(B.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),l.a.createElement(O.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(l.a.createElement(A.a,{prefix:l.a.createElement(B.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u7528\u6237\u5bc6\u7801"}))),l.a.createElement(O.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(l.a.createElement(P.a,null,"\u8bb0\u4f4f\u5bc6\u7801")),l.a.createElement(C.b,{className:"login-form-forgot",to:"/register"},"\u5fd8\u8bb0\u5bc6\u7801"),l.a.createElement(F.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u7acb\u5373\u767b\u5f55"),l.a.createElement("div",{className:"toRegister"},"\u6ca1\u6709\u8d26\u53f7\uff1f ",l.a.createElement(C.b,{to:"/register"},"\u53bb\u6ce8\u518c")," Or ",l.a.createElement(C.b,{to:"/"},"\u6e38\u5ba2\u767b\u5f55"))))}}]),t}(l.a.Component),V=O.a.create({name:"normal_login"})(J),q=function(e){function t(e){var a;return h()(this,t),a=w()(this,I()(t).call(this,e)),L()(M()(a),"handleSubmit",function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)})}),a.state={username:"1111",fileobj:"",status:!1,arr:[1,2,3,4],form:"",imageUrl:""},a.changeStatus=a.changeStatus.bind(M()(a)),a.getData=a.getData.bind(M()(a)),a.login=a.login.bind(M()(a)),a.openMessage=a.openMessage.bind(M()(a)),a.upload=a.upload.bind(M()(a)),a.getFileData=a.getFileData.bind(M()(a)),a.beforeUpload=a.beforeUpload.bind(M()(a)),a}return x()(t,e),d()(t,[{key:"login",value:function(){var e=this;fetch.post("login",{data:{userName:this.state.username,password:this.state.password}}).then(function(t){"200"!==t.code?f.a.error(t.msg):(f.a.success("\u767b\u5f55\u6210\u529f\uff5e"),e.props.history.push("/"))})}},{key:"getData",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(L()({},n,a)),console.log(e.target.files[0])}},{key:"getFileData",value:function(e){this.setState({fileobj:e.target.files[0]})}},{key:"changeStatus",value:function(){this.setState(function(e){return{status:!e.status}})}},{key:"upload",value:function(){var e=this;fetch.get("getQiniuToken").then(function(t){y.uploadFile(e.state.fileobj,t.data.qiniuToken).then(function(t){console.log(t),e.setState({imageUrl:"http://img.xuweijin.com/"+t}),fetch.post("editUserAvater",{u_id:"1",avater:"http://img.xuweijin.com/"+t}).then(function(e){console.log(e)})})})}},{key:"openMessage",value:function(){f.a.success("\u6210\u529f\uff5e"),console.log(this.props)}},{key:"beforeUpload",value:function(e){this.setState({fileobj:e})}},{key:"uploadAvater",value:function(){}},{key:"render",value:function(){l.a.createElement("div",null,l.a.createElement(B.a,{type:this.state.loading?"loading":"plus"}),l.a.createElement("div",{className:"ant-upload-text"},"Upload"));return l.a.createElement("div",null,l.a.createElement(V,{parentProps:this.props}))}}]),t}(l.a.Component),z=a(84),R=a.n(z),H=(a(372),a(562)),W=a(553),$=a(554),G=a(563),Y=a(555),Q=a(560),K=(a(373),function(e){function t(e){var a;return h()(this,t),(a=w()(this,I()(t).call(this,e))).handleSubmit=a.handleSubmit.bind(M()(a)),a}return x()(t,e),d()(t,[{key:"handleSubmit",value:function(e){var t=this;console.log(this.props),e.preventDefault(),this.props.form.validateFields(function(e,a){var n=t;e||fetch.post("login",{userName:a.userName,password:a.password}).then(function(e){console.log(n.props),"200"!==e.code?f.a.error(e.msg):(f.a.success("\u767b\u5f55\u6210\u529f\uff5e"),U.a.set("loginInfo",e.data),window.location.reload(),t.props.handleCancel())})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return l.a.createElement("div",{className:"loginModal-wrap"},l.a.createElement(O.a,{onSubmit:this.handleSubmit,className:"login-form"},l.a.createElement(O.a.Item,null,e("userName",{rules:[{required:!0,message:"Please input your username!"}]})(l.a.createElement(A.a,{prefix:l.a.createElement(B.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),l.a.createElement(O.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(l.a.createElement(A.a,{prefix:l.a.createElement(B.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u7528\u6237\u5bc6\u7801"}))),l.a.createElement(O.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(l.a.createElement(P.a,null,"\u8bb0\u4f4f\u5bc6\u7801")),l.a.createElement(C.b,{className:"login-form-forgot",to:"/register"},"\u5fd8\u8bb0\u5bc6\u7801"),l.a.createElement(F.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u7acb\u5373\u767b\u5f55"),l.a.createElement("div",{className:"toRegister"},"\u6ca1\u6709\u8d26\u53f7\uff1f ",l.a.createElement(C.b,{to:"/register"},"\u53bb\u6ce8\u518c")))))}}]),t}(l.a.Component)),X=O.a.create({name:"normal_login"})(K),Z=function(e){function t(){return h()(this,t),w()(this,I()(t).apply(this,arguments))}return x()(t,e),d()(t,[{key:"componentWillMount",value:function(){console.log(this.props)}},{key:"render",value:function(){return console.log(this.props),l.a.createElement(X,this.props)}}]),t}(l.a.Component),ee=function(e){function t(e){var a;return h()(this,t),(a=w()(this,I()(t).call(this,e))).state={loginInfo:"",modalVisible:!1},a.logout=a.logout.bind(M()(a)),a.handleCancel=a.handleCancel.bind(M()(a)),a.toMyBlog=a.toMyBlog.bind(M()(a)),a}return x()(t,e),d()(t,[{key:"componentDidMount",value:function(){U.a.get("loginInfo")&&this.setState({loginInfo:JSON.parse(U.a.get("loginInfo"))})}},{key:"logout",value:function(){U.a.remove("loginInfo"),this.props.props.history.push("/login")}},{key:"handleCancel",value:function(){U.a.get("loginInfo")&&this.setState({loginInfo:JSON.parse(U.a.get("loginInfo"))}),this.setState({modalVisible:!1})}},{key:"toMyBlog",value:function(){this.state.loginInfo?this.props.props.history.push("/myBlog"):this.setState({modalVisible:!0})}},{key:"render",value:function(){var e=l.a.createElement(H.b,null,l.a.createElement(H.b.Item,null,l.a.createElement("span",{rel:"noopener noreferrer"},"\u6211\u7684\u4e3b\u9875")),l.a.createElement(H.b.Item,null,l.a.createElement("span",{rel:"noopener noreferrer"},"\u8bbe\u7f6e")),l.a.createElement(H.b.Item,null,l.a.createElement("span",{onClick:this.logout,rel:"noopener noreferrer"},"\u9000\u51fa")));return l.a.createElement("div",{className:"header-wrap-big"},l.a.createElement("div",{className:"header-wrap"},l.a.createElement(W.a,{type:"flex"},l.a.createElement($.a,{span:16},l.a.createElement("div",{className:"header-left"},l.a.createElement(C.b,{to:"/",className:"text-wrap"},l.a.createElement("svg",{width:"130",height:"60"},l.a.createElement("text",{textAnchor:"middle",x:"50%",y:"50%",className:"text text-1"},"\u9ca8\u9c7c\u8fa3\u6912"),l.a.createElement("text",{textAnchor:"middle",x:"50%",y:"50%",className:"text text-2"},"\u9ca8\u9c7c\u8fa3\u6912"),l.a.createElement("text",{textAnchor:"middle",x:"50%",y:"50%",className:"text text-3"},"\u9ca8\u9c7c\u8fa3\u6912"),l.a.createElement("text",{textAnchor:"middle",x:"50%",y:"50%",className:"text text-4"},"\u9ca8\u9c7c\u8fa3\u6912"))),l.a.createElement(H.b,{onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal"},l.a.createElement(H.b.Item,{key:"mail"},l.a.createElement(C.b,{to:"/"},l.a.createElement(B.a,{type:"home"}),"\u5e7f\u573a")),l.a.createElement(H.b.Item,{key:"app"},l.a.createElement("a",{href:"javascript:;",onClick:this.toMyBlog},l.a.createElement(B.a,{type:"meh"}),"\u6211\u7684\u535a\u5ba2"))))),l.a.createElement($.a,{span:8},l.a.createElement("div",{className:"header-right"},l.a.createElement("div",null,""===this.state.loginInfo?l.a.createElement("div",null,l.a.createElement(C.b,{className:"mr-20",to:"/login"},"\u767b\u5f55"),l.a.createElement(C.b,{to:"/register"},"\u6ce8\u518c")):l.a.createElement("div",null,l.a.createElement(C.b,{className:"mr-20",to:"/writeBlog"},"\u5199\u6587\u7ae0"),console.log(this.state.loginInfo),l.a.createElement(G.a,{trigger:["click"],overlay:e,placement:"bottomCenter"},this.state.loginInfo.avater?l.a.createElement("a",{href:"javascript:;",className:"avater-a"},l.a.createElement("img",{src:this.state.loginInfo.avater,className:"avater-img",alt:"\u5934\u50cf"})):l.a.createElement(Y.a,{size:"large",icon:"user"})))))))),l.a.createElement(Q.a,{title:"\u8bf7\u5148\u767b\u5f55",visible:this.state.modalVisible,footer:null,onOk:this.handleOk,onCancel:this.handleCancel,okButtonProps:{disabled:!0},cancelButtonProps:{disabled:!0}},l.a.createElement(Z,R()({},this.props,{handleCancel:this.handleCancel}))))}}]),t}(l.a.Component),te=function(e){function t(){return h()(this,t),w()(this,I()(t).apply(this,arguments))}return x()(t,e),d()(t,[{key:"componentWillMount",value:function(){console.log(this.props)}},{key:"render",value:function(){return l.a.createElement("div",{className:"layout-wrap-big"},l.a.createElement(ee,{props:this.props}),l.a.createElement("div",{className:"layout-wrap"},this.props.children))}}]),t}(l.a.Component),ae=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return a=w()(this,(e=I()(t)).call.apply(e,[this].concat(l))),L()(M()(a),"handleSubmit",function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||fetch.post("register",{userName:t.userName,password:t.password,realName:t.realName,phone:t.phone}).then(function(e){"200"!==e.code?f.a.error(e.msg):(f.a.success("\u6ce8\u518c\u6210\u529f\uff5e"),a.props.parentProps.history.push("/login"))})})}),a}return x()(t,e),d()(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return l.a.createElement(O.a,{onSubmit:this.handleSubmit,className:"login-form"},l.a.createElement(O.a.Item,null,e("userName",{rules:[{required:!0,message:"Please input your username!"}]})(l.a.createElement(A.a,{prefix:l.a.createElement(B.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),l.a.createElement(O.a.Item,null,e("realName",{rules:[{required:!0,message:"Please input your nickname!"}]})(l.a.createElement(A.a,{prefix:l.a.createElement(B.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u6635\u79f0"}))),l.a.createElement(O.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(l.a.createElement(A.a,{prefix:l.a.createElement(B.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),l.a.createElement(O.a.Item,null,e("phoneNum",{rules:[{required:!0,message:"Please input your phoneNum!"}]})(l.a.createElement(A.a,{prefix:l.a.createElement(B.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u624b\u673a\u53f7"}))),l.a.createElement(O.a.Item,null,l.a.createElement(F.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u7acb\u5373\u6ce8\u518c"),l.a.createElement("div",{className:"toRegister"},"\u5df2\u6709\u8d26\u53f7\uff1f ",l.a.createElement(C.b,{to:"/login"},"\u53bb\u767b\u5f55"))))}}]),t}(l.a.Component),ne=O.a.create({name:"normal_login"})(ae),le=function(e){function t(e){var a;return h()(this,t),(a=w()(this,I()(t).call(this,e))).state={username:"",password:"",phone:""},a.inputChange=a.inputChange.bind(M()(a)),a.register=a.register.bind(M()(a)),a}return x()(t,e),d()(t,[{key:"inputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(L()({},n,a))}},{key:"register",value:function(){var e=this;console.log(this.state),fetch.post("register",{userName:this.state.username,password:this.state.password}).then(function(t){"200"===t.data.code?e.props.history.push("/login"):alert(t.data.msg)})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(ne,{parentProps:this.props}))}}]),t}(l.a.Component),oe=function(e){function t(){return h()(this,t),w()(this,I()(t).apply(this,arguments))}return x()(t,e),d()(t,[{key:"render",value:function(){return l.a.createElement("div",null,"\u62b1\u6b49\uff0c\u627e\u4e0d\u5230\u6b64\u9875\u9762 ",l.a.createElement(C.b,{exact:!0,to:"/"},"\u53bb\u9996\u9875"))}}]),t}(l.a.Component),se=(a(382),a(566)),ie=a(87),re=function(e){function t(e){var a;return h()(this,t),(a=w()(this,I()(t).call(this,e))).state={blogList:"",loginInfo:""},a.goDetail=a.goDetail.bind(M()(a)),a.goUser=a.goUser.bind(M()(a)),a}return x()(t,e),d()(t,[{key:"componentDidMount",value:function(){U.a.get("loginInfo")&&this.setState({loginInfo:JSON.parse(U.a.get("loginInfo"))}),this.getBlogList()}},{key:"getBlogList",value:function(){var e=this;fetch.get("getArticle",{u_id:""}).then(function(t){e.setState({blogList:t.data})})}},{key:"goDetail",value:function(e){this.props.history.push("/blogDetail/"+e.id)}},{key:"goUser",value:function(e){this.props.history.push("/user/"+e.u_id)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("ul",{className:"blog-ul"},""===this.state.blogList?l.a.createElement(se.a,{active:!0}):0===this.state.blogList.length?l.a.createElement(ie.a,{image:ie.a.PRESENTED_IMAGE_SIMPLE}):this.state.blogList.map(function(t,a){return l.a.createElement("li",{key:a,className:"li-wrap"},l.a.createElement("div",{className:"li-top"},l.a.createElement("span",{className:"to-user-btn",onClick:e.goUser.bind(e,t)},t.real_name?t.real_name:t.user_name),"\u30fb",l.a.createElement("span",null,t.tag_name),"\u30fb",l.a.createElement("span",null,window.$utils.goodTime(t.create_time/1e3))),l.a.createElement("div",{className:"tc-content",onClick:e.goDetail.bind(e,t)},l.a.createElement("div",{className:"li-title"},t.article_title),l.a.createElement("div",{className:"li-content"},t.article_text)))})))}}]),t}(l.a.Component),ce=(a(383),a(384),a(170)),ue=a.n(ce),me=a(164),he=a(559),pe=a(558),de=he.a.Option,ge=function(e){function t(e){var a;return h()(this,t),a=w()(this,I()(t).call(this,e)),L()(M()(a),"handleSubmit",function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(console.log(t),!e){var n={u_id:a.state.loginInfo.u_id,article_title:t.title,article_tag_id:t.tag,article_text:t.content.toText(),article_content:t.content.toHTML()};fetch.post("publish",n).then(function(e){console.log(e),"200"===e.code?a.props.history.push("/"):Object(f.a)(e.msg)})}})}),a.state={tagList:[],visible:!1,tagName:"",loginInfo:"",editorState:""},a.showModal=a.showModal.bind(M()(a)),a.handleOk=a.handleOk.bind(M()(a)),a.handleCancel=a.handleCancel.bind(M()(a)),a.onChange=a.onChange.bind(M()(a)),a.uploadHandler=a.uploadHandler.bind(M()(a)),a.beforeUpload=a.beforeUpload.bind(M()(a)),a}return x()(t,e),d()(t,[{key:"componentDidMount",value:function(){U.a.get("loginInfo")&&this.setState({loginInfo:JSON.parse(U.a.get("loginInfo"))}),this.getTagList(),this.props.form.setFieldsValue({content:ue.a.createEditorState("")})}},{key:"getTagList",value:function(){var e=this;console.log(this),fetch.get("getTagList",{u_id:JSON.parse(U.a.get("loginInfo")).u_id,token:JSON.parse(U.a.get("loginInfo")).token}).then(function(t){e.setState({tagList:t.data})})}},{key:"handleOk",value:function(){console.log(this);var e=this;""!==this.state.tagName?(fetch.post("saveArticleTag",{name:this.state.tagName,u_id:this.state.loginInfo.u_id,token:JSON.parse(U.a.get("loginInfo")).token}).then(function(t){"200"===t.code?(f.a.success("\u6dfb\u52a0\u6210\u529f"),e.getTagList()):Object(f.a)(t.msg)}),this.setState({visible:!1})):f.a.warn("\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a")}},{key:"handleCancel",value:function(){this.setState({visible:!1})}},{key:"showModal",value:function(){this.setState({visible:!0})}},{key:"onChange",value:function(e){this.setState({tagName:e.target.value})}},{key:"uploadHandler",value:function(){var e=this;fetch.get("getQiniuToken").then(function(t){y.uploadFile(e.state.fileobj,t.data.qiniuToken).then(function(t){console.log(t),e.setState({imageUrl:"http://pr42y3dpx.bkt.clouddn.com/"+t}),e.props.form.validateFields(function(a,n){console.log(n.content),e.props.form.setFieldsValue({content:me.ContentUtils.insertMedias(n.content,[{type:"IMAGE",url:"http://pr42y3dpx.bkt.clouddn.com/"+t}])})})})})}},{key:"beforeUpload",value:function(e){this.setState({fileobj:e})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=[{key:"antd-uploader",type:"component",component:l.a.createElement(pe.a,{accept:"image/*",showUploadList:!1,beforeUpload:this.beforeUpload,customRequest:this.uploadHandler},l.a.createElement("button",{type:"button",className:"control-item button upload-button","data-title":"\u63d2\u5165\u56fe\u7247"},l.a.createElement(B.a,{type:"picture",theme:"filled"})))}];return l.a.createElement("div",{className:"writeBlog-wrap"},l.a.createElement(O.a,{onSubmit:this.handleSubmit},l.a.createElement(O.a.Item,{label:"\u6587\u7ae0\u6807\u9898"},e("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}]})(l.a.createElement(A.a,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}))),l.a.createElement(O.a.Item,{label:"\u6587\u7ae0\u6807\u7b7e"},e("tag",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u6807\u7b7e"}]})(l.a.createElement(he.a,{placeholder:"\u6807\u7b7e"},this.state.tagList.map(function(e,t){return l.a.createElement(de,{value:e.id,key:e.id},e.name)}))),l.a.createElement(F.a,{onClick:this.showModal},"\u65b0\u589e\u6807\u7b7e")),l.a.createElement(O.a.Item,{label:"\u6587\u7ae0\u6b63\u6587"},e("content",{validateTrigger:"onBlur",rules:[{required:!0,validator:function(e,t,a){t.isEmpty()?a("\u8bf7\u8f93\u5165\u6b63\u6587\u5185\u5bb9"):a()}}]})(l.a.createElement(ue.a,{className:"my-editor",excludeControls:["media","emoji"],extendControls:t,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587\u5185\u5bb9"}))),l.a.createElement(O.a.Item,null,l.a.createElement(F.a,{size:"large",type:"primary",htmlType:"submit"},"\u53d1\u5e03"))),l.a.createElement(Q.a,{title:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},l.a.createElement(A.a,{onChange:this.onChange})))}}]),t}(l.a.Component),fe=O.a.create()(ge),ve=(a(547),a(556)),Ee=function(e){function t(e){var a;return h()(this,t),(a=w()(this,I()(t).call(this,e))).state={articleDetail:"",host:"",hasFollowed:0,loginInfo:"",modalVisible:!1},a.follow=a.follow.bind(M()(a)),a.collection=a.collection.bind(M()(a)),a.handleCancel=a.handleCancel.bind(M()(a)),a}return x()(t,e),d()(t,[{key:"componentWillMount",value:function(){console.log(this.props);var e=window.location.href;(e=e.toLocaleLowerCase()).match("xuweijin.com")?this.setState({host:"https://www.xuweijin.com/blogApi"}):this.setState({host:"http://localhost:3003"}),U.a.get("loginInfo")&&this.setState({loginInfo:JSON.parse(U.a.get("loginInfo"))}),this.getArticleDetail()}},{key:"getArticleDetail",value:function(){var e=this;fetch.get("getArticleById",{id:this.props.match.params.article_id,u_id:U.a.get("loginInfo")?JSON.parse(U.a.get("loginInfo")).u_id:""}).then(function(t){console.log(t),setTimeout(function(){console.log(e.state.host)},1e3),e.setState({articleDetail:t.data,hasFollowed:t.data.hasFollowed})})}},{key:"test",value:function(){console.log("12341")}},{key:"handleCancel",value:function(){console.log("124141245"),U.a.get("loginInfo")&&this.setState({loginInfo:JSON.parse(U.a.get("loginInfo"))}),this.setState({modalVisible:!1})}},{key:"collection",value:function(){var e=this;fetch.post("collectActicle",{token:JSON.parse(U.a.get("loginInfo")).token,article_id:this.state.articleDetail.id}).then(function(t){if("200"===t.code){var a=0,n=e.state.articleDetail;0===e.state.articleDetail.hasCollect?(a=1,f.a.success("\u6536\u85cf\u6210\u529f\uff5e")):(a=0,f.a.success("\u5df2\u53d6\u6d88\u6536\u85cf\uff5e")),n.hasCollect=a,e.setState({articleDetail:n})}})}},{key:"follow",value:function(){var e=this;""===this.state.loginInfo?this.setState({modalVisible:!0}):fetch.post("follow",{u_id:this.state.loginInfo.u_id,f_id:this.state.articleDetail.u_id,token:JSON.parse(U.a.get("loginInfo")).token}).then(function(t){if("200"===t.code){var a=0;0===e.state.hasFollowed?(a=1,f.a.success("\u5173\u6ce8\u6210\u529f\uff5e")):(a=0,f.a.success("\u53d6\u5173\u6210\u529f\uff5e")),e.setState({hasFollowed:a})}})}},{key:"render",value:function(){return l.a.createElement("div",{className:"blogDetail-wrap"},""===this.state.articleDetail?l.a.createElement("div",{className:"load-wrap"},l.a.createElement(ve.a,{size:"large"})):l.a.createElement("div",null,l.a.createElement("div",{className:"author-wrap"},l.a.createElement("div",{className:"author-left"},l.a.createElement("img",{className:"img-avater",src:this.state.articleDetail.avater?this.state.articleDetail.avater:this.state.host+"/upload/avater_boy.png",alt:""}),l.a.createElement("p",{className:"text-wrap"},l.a.createElement("span",{className:"name-span"},this.state.articleDetail.real_name?this.state.articleDetail.real_name:this.state.articleDetail.user_name),l.a.createElement("br",null),l.a.createElement("span",{className:"time-span"},window.$utils.formatDate(this.state.articleDetail.create_time,"TYMD")))),l.a.createElement("div",{className:"author-right"},l.a.createElement("div",{className:"collect-wrap",onClick:this.collection},"0"==this.state.articleDetail.hasCollect?l.a.createElement(B.a,{type:"star",style:{color:"#ddd",fontSize:"20px"}}):l.a.createElement(B.a,{type:"star",theme:"filled",style:{color:"#1890ff",fontSize:"20px"}})),this.state.articleDetail.u_id===this.state.loginInfo.u_id?"":l.a.createElement("div",{className:"follow-wrap"},0===this.state.hasFollowed?l.a.createElement(F.a,{onClick:this.follow},"\u5173\u6ce8"):l.a.createElement(F.a,{onClick:this.follow},"\u5df2\u5173\u6ce8")))),l.a.createElement("div",{className:"content-wrap"},l.a.createElement("div",{className:"title"},this.state.articleDetail.article_title),l.a.createElement("div",{className:"article-content",dangerouslySetInnerHTML:{__html:this.state.articleDetail.article_content}}))),l.a.createElement(Q.a,{title:"\u8bf7\u5148\u767b\u5f55",visible:this.state.modalVisible,footer:null,onOk:this.handleOk,onCancel:this.handleCancel,okButtonProps:{disabled:!0},cancelButtonProps:{disabled:!0}},l.a.createElement(Z,R()({},this.props,{handleCancel:this.handleCancel}))))}}]),t}(l.a.Component),be=function(e){function t(e){var a;return h()(this,t),(a=w()(this,I()(t).call(this,e))).state={blogList:"",loginInfo:""},a.goDetail=a.goDetail.bind(M()(a)),a}return x()(t,e),d()(t,[{key:"componentDidMount",value:function(){U.a.get("loginInfo")&&this.setState({loginInfo:JSON.parse(U.a.get("loginInfo"))}),this.getBlogList()}},{key:"getBlogList",value:function(){var e=this;fetch.get("getArticle",{u_id:JSON.parse(U.a.get("loginInfo")).u_id}).then(function(t){e.setState({blogList:t.data})})}},{key:"goDetail",value:function(e){this.props.history.push("/blogDetail/"+e.id)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"myblog-wrap"},l.a.createElement("ul",{className:"blog-ul"},""===this.state.blogList?l.a.createElement(se.a,{active:!0}):0!==this.state.blogList.length?this.state.blogList.map(function(t,a){return l.a.createElement("li",{key:a,className:"li-wrap"},l.a.createElement("div",{className:"li-top"},l.a.createElement("span",null,t.user_name),"\u30fb",l.a.createElement("span",null,t.tag_name),"\u30fb",l.a.createElement("span",null,window.$utils.goodTime(t.create_time/1e3))),l.a.createElement("div",{className:"tc-content",onClick:e.goDetail.bind(e,t)},l.a.createElement("div",{className:"li-title"},t.article_title),l.a.createElement("div",{className:"li-content"},t.article_text)))}):l.a.createElement(ie.a,{image:ie.a.PRESENTED_IMAGE_SIMPLE})))}}]),t}(l.a.Component),ye=(a(549),function(e){function t(e){var a;return h()(this,t),(a=w()(this,I()(t).call(this,e))).state={blogList:"",userInfo:"",host:"",loginInfo:"",modalVisible:!1},a.follow=a.follow.bind(M()(a)),a.handleCancel=a.handleCancel.bind(M()(a)),a}return x()(t,e),d()(t,[{key:"componentWillMount",value:function(){this.getBlogList(),this.getUserBasicInfo();var e=window.location.href;(e=e.toLocaleLowerCase()).match("xuweijin.com")?this.setState({host:"https://www.xuweijin.com/blogApi"}):this.setState({host:"http://localhost:3003"}),U.a.get("loginInfo")&&this.setState({loginInfo:JSON.parse(U.a.get("loginInfo"))})}},{key:"getBlogList",value:function(){var e=this;fetch.get("getArticle",{u_id:this.props.match.params.u_id}).then(function(t){e.setState({blogList:t.data})})}},{key:"handleCancel",value:function(){U.a.get("loginInfo")&&this.setState({loginInfo:JSON.parse(U.a.get("loginInfo"))}),this.setState({modalVisible:!1})}},{key:"follow",value:function(){var e=this;""===this.state.loginInfo?this.setState({modalVisible:!0}):fetch.post("follow",{u_id:this.state.loginInfo.u_id,f_id:this.state.userInfo.u_id,token:JSON.parse(U.a.get("loginInfo")).token}).then(function(t){if("200"===t.code){var a=0,n=e.state.userInfo;0===e.state.userInfo.hasFollowed?(a=1,f.a.success("\u5173\u6ce8\u6210\u529f\uff5e"),n.follower++):(a=0,f.a.success("\u53d6\u5173\u6210\u529f\uff5e"),n.follower--),n.hasFollowed=a,e.setState({userInfo:n})}})}},{key:"getUserBasicInfo",value:function(){var e=this;fetch.get("getUserBasicInfo",{u_id:this.props.match.params.u_id,token:U.a.get("loginInfo")?JSON.parse(U.a.get("loginInfo")).token:""}).then(function(t){e.setState({userInfo:t.data})})}},{key:"goDetail",value:function(e){this.props.history.push("/blogDetail/"+e.id)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"userComponent-wrap"},l.a.createElement("div",{className:"userInfo-content"},""===this.state.userInfo?l.a.createElement("div",null,l.a.createElement(ve.a,{delay:"1000"})):l.a.createElement("div",null,l.a.createElement("div",{className:"uc-left"},l.a.createElement("img",{className:"img-avater",src:this.state.userInfo.avater?this.state.userInfo.avater:this.state.host+"/upload/avater_boy.png",alt:""}),l.a.createElement("div",{className:"left-text"},l.a.createElement("p",null,l.a.createElement("span",{className:"name-span"},this.state.userInfo.real_name?this.state.userInfo.real_name:this.state.userInfo.user_name)),l.a.createElement("ul",{className:"left-ul"},l.a.createElement("li",{className:"left-li"},l.a.createElement("span",{className:"num-text"},this.state.userInfo.following),l.a.createElement("br",null),l.a.createElement("span",{className:"text-span"},"\u5173\u6ce8")),l.a.createElement("li",{className:"left-li"},l.a.createElement("span",{className:"num-text"},this.state.userInfo.follower),l.a.createElement("br",null),l.a.createElement("span",{className:"text-span"},"\u5173\u6ce8\u8005"))))),l.a.createElement("div",{className:"uc-right"},this.state.userInfo.u_id===this.state.loginInfo.u_id?"":l.a.createElement("div",{className:"button-wrap"},0===this.state.userInfo.hasFollowed?l.a.createElement(F.a,{onClick:this.follow},"\u5173\u6ce8"):l.a.createElement(F.a,{onClick:this.follow},"\u5df2\u5173\u6ce8"))))),l.a.createElement("div",{className:"article-content-list"},l.a.createElement("ul",{className:"blog-ul"},""===this.state.blogList?l.a.createElement(se.a,{active:!0}):0===this.state.blogList.length?l.a.createElement(ie.a,{image:ie.a.PRESENTED_IMAGE_SIMPLE}):this.state.blogList.map(function(t,a){return l.a.createElement("li",{key:a,className:"li-wrap"},l.a.createElement("div",{className:"li-top"},l.a.createElement("span",null,t.real_name?t.real_name:t.user_name),"\u30fb",l.a.createElement("span",null,t.tag_name),"\u30fb",l.a.createElement("span",null,window.$utils.goodTime(t.create_time/1e3))),l.a.createElement("div",{className:"tc-content",onClick:e.goDetail.bind(e,t)},l.a.createElement("div",{className:"li-title"},t.article_title),l.a.createElement("div",{className:"li-content"},t.article_text)))}))),l.a.createElement(Q.a,{title:"\u8bf7\u5148\u767b\u5f55",visible:this.state.modalVisible,footer:null,onOk:this.handleOk,onCancel:this.handleCancel,okButtonProps:{disabled:!0},cancelButtonProps:{disabled:!0}},l.a.createElement(Z,R()({},this.props,{handleCancel:this.handleCancel}))))}}]),t}(l.a.Component)),ke=function(e){function t(){return h()(this,t),w()(this,I()(t).apply(this,arguments))}return x()(t,e),d()(t,[{key:"render",value:function(){return l.a.createElement(C.a,null,l.a.createElement(_.c,null,l.a.createElement(_.a,{path:"/login",component:q}),l.a.createElement(_.a,{path:"/register",component:le}),l.a.createElement(_.a,{path:"/",render:function(e){var t=e.history,a=e.location;e.match;return l.a.createElement(te,{history:t,location:a,match:a},l.a.createElement(_.a,{path:"/",exact:!0,component:re}),l.a.createElement(_.a,{path:"/writeBlog",exact:!0,component:fe}),l.a.createElement(_.a,{path:"/myBlog",exact:!0,component:be}),l.a.createElement(_.a,{path:"/blogDetail/:article_id",exact:!0,component:Ee}),l.a.createElement(_.a,{path:"/user/:u_id",exact:!0,component:ye}))}}),l.a.createElement(_.a,{component:oe})))}}]),t}(l.a.Component),we=(a(550),a(551),function(e){function t(){return h()(this,t),w()(this,I()(t).apply(this,arguments))}return x()(t,e),d()(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"body-wrap"},l.a.createElement(ke,null))}}]),t}(l.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.fetch=E,window.$utils=y,s.a.render(l.a.createElement(we,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[256,1,2]]]);
//# sourceMappingURL=main.f883df7a.chunk.js.map